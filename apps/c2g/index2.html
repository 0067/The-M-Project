<!DOCTYPE html>
<html>
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href="resources/app_icon.png" rel="apple-touch-icon" />

    <title>Car2Gether</title>
    <script src="../../modules/jquery/jquery-1.4.3.min.js"></script>
    <script src="../../modules/jquery_mobile/jquery.mobile-1.0a2pre.min.js"></script>
    <script src="../../modules/underscore/underscore-min.js"></script>
    <script src="../../modules/core/foundation/m.js"></script>
    <script src="../../modules/core/foundation/object.js"></script>
    <script src="../../modules/core/foundation/request.js"></script>
    <script src="../../modules/core/utility/logger.js"></script>
    <script src="../../modules/core/utility/date.js"></script>
    <script src="../../modules/core/utility/cypher.js"></script>
    <script src="../../modules/core/foundation/event_dispatcher.js"></script>
    <script src="../../modules/core/foundation/observable.js"></script>
    <script src="../../modules/core/foundation/controller.js"></script>
    <script src="../../modules/core/datastore/data_provider.js"></script>
    <script src="../../modules/core/foundation/model.js"></script>
    <script src="../../modules/core/foundation/view.js"></script>
    <script src="../../modules/core/foundation/view_manager.js"></script>
    <script src="../../modules/core/foundation/model_registry.js"></script>
    <script src="../../modules/core/foundation/model_manager.js"></script>
    <script src="../../modules/core/foundation/application.js"></script>

    <script src="../../modules/ui/page.js"></script>
    <script src="../../modules/ui/toolbar.js"></script>
    <script src="../../modules/ui/scroll.js"></script>
    <script src="../../modules/ui/label.js"></script>
    <script src="../../modules/ui/button.js"></script>
    <script src="../../modules/ui/list.js"></script>
    <script src="../../modules/ui/list_item.js"></script>
    <script src="../../modules/ui/text_field.js"></script>
    <script src="../../modules/ui/grid.js"></script>
    <script src="../../modules/ui/image.js"></script>
    <script src="../../modules/ui/toggle.js"></script>

    <script src="c2g.js"></script>

    <link href="../../modules/themes/jquery_mobile/jquery.mobile-1.0a2pre.min.css" rel="stylesheet" />
</head>
<body>
        <script language="JavaScript">
            C2G.app = M.Application.extend({
                mainPage: M.PageView.design({

                    childViews: ['header content footer'],

                    header: M.ToolbarView.design({

                        childViews: ['image appLabel logoutButton'],

                        image: M.ImageView.design({
                            value: 'resources/logo.png',
                            anchorLocation: M.LEFT
                        }),

                        appLabel: M.LabelView.design({
                            value: 'car2gether',
                            anchorLocation: M.CENTER
                        }),

                        logoutButton: M.ButtonView.design({
                            value: 'Logout',
                            target: C2G.LoginController,
                            action: 'logout',
                            icon: 'back',
                            anchorLocation: M.RIGHT
                        })

                    }),

                    content: M.ScrollView.design({

                        childViews: ['startField destinationField driverButton coDriverButton rideListButton mapButton'],

                        startField: M.TextFieldView.design({
                            name: 'startField',
                            initialText: 'Ihr Startort, z. B. Stuttgart',
                            label: 'Start: '
                        }),

                        destinationField: M.TextFieldView.design({
                            name: 'destinationField',
                            initialText: 'Ihr Zielort, z. B. M&uuml;nchen',
                            label: 'Ziel: ',
                            target: C2G.RideController,
                            action: 'addRideAsDriver'
                        }),

                        driverButton: M.ButtonView.design({
                            value: 'Fahren',
                            target: C2G.RideController,
                            action: 'addRideAsDriver'
                        }),

                        coDriverButton: M.ButtonView.design({
                            value: 'Mitfahren',
                            target: C2G.RideController,
                            action: 'addRideAsDriver'
                        }),

                        rideListButton: M.ButtonView.design({
                            value: 'Fahrtenliste',
                            target: C2G.RideController,
                            action: 'showRides'
                        }),

                        mapButton: M.ButtonView.design({
                            value: 'Karte',
                            target: C2G.MapController,
                            action: 'showMap'
                        })
                    }),
                    
                    footer: M.ToolbarView.design({

                       childViews: ['copyright'],

                       anchorLocation: M.BOTTOM,

                       copyright: M.LabelView.design({
                           value: '&copy; 2010 car2gether',
                           anchorLocation: M.CENTER
                       })

                    })
                    
                }),

                ridesView: M.PageView.design({
                    childViews: ['header content footer'],

                    header: M.ToolbarView.design({
                        childViews: ['title'],

                        title: M.LabelView.design({
                            value: 'Fahrten&uuml;bersicht',
                            anchorLocation: M.CENTER
                        })
                    }),

                    content: M.ScrollView.extend({
                        childViews: ['ridesList'],

                        ridesList: M.ListView.design({
                            contentBinding: 'C2G.RideController.myRides',
                            listItemTemplateView: C2G.RideItemView,
                            isNumberedList: YES
                        })
                    }),

                    footer: M.ToolbarView.design({
                        childViews: ['copyright'],

                        anchorLocation: M.BOTTOM,

                        copyright: M.LabelView.design({
                           value: '&copy; 2010 car2gether',
                           anchorLocation: M.CENTER
                        })
                    })
                })

            });
        </script>

        <!-- START THE APP BY CALLING THE M.APPLICATION's MAIN-METHOD -->
        <!-- in the future this call will be made automatically -->
        <script language="JavaScript">
            C2G.app.main();
        </script>

</body>
</html>