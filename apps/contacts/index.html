<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href="resources/app_icon.png" rel="apple-touch-icon" />

    <title>Contacts</title>
    <script src="../../modules/jquery/jquery-1.4.4.min.js"></script>
    <script src="../../modules/jquery_mobile/jquery.mobile-1.0a2.min.js"></script>
    <script src="../../modules/underscore/underscore-min.js"></script>
    <script src="../../modules/core/foundation/m.js"></script>
    <script src="../../modules/core/foundation/object.js"></script>
    <script src="../../modules/core/foundation/request.js"></script>
    <script src="../../modules/core/utility/logger.js"></script>
    <script src="../../modules/core/utility/date.js"></script>
    <script src="../../modules/core/utility/cypher_algorithms/base64.js"></script>
    <script src="../../modules/core/utility/cypher_algorithms/sha256.js"></script>
    <script src="../../modules/core/utility/cypher.js"></script>
    <script src="../../modules/core/utility/environment.js"></script>
    <script src="../../modules/core/foundation/event_dispatcher.js"></script>
    <script src="../../modules/core/foundation/observable.js"></script>
    <script src="../../modules/core/foundation/controller.js"></script>
    <script src="../../modules/core/datastore/data_provider.js"></script>
    <script src="../../modules/core/datastore/web_sql.js"></script>
    <script src="../../modules/core/datastore/local_storage.js"></script>
    <script src="../../modules/core/datastore/validator.js"></script>
    <script src="../../modules/core/datastore/validators/email_validator.js"></script>
    <script src="../../modules/core/datastore/validators/not_minus_validator.js"></script>
    <script src="../../modules/core/datastore/validators/number_validator.js"></script>
    <script src="../../modules/core/datastore/validators/presence_validator.js"></script>
    <script src="../../modules/core/datastore/validators/phone_validator.js"></script>
    <script src="../../modules/core/datastore/validators/url_validator.js"></script>
    <script src="../../modules/core/datastore/model_attribute.js"></script>
    <script src="../../modules/core/foundation/model.js"></script>
    <script src="../../modules/core/foundation/view.js"></script>
    <script src="../../modules/core/foundation/view_manager.js"></script>
    <script src="../../modules/core/foundation/model_registry.js"></script>
    <script src="../../modules/core/foundation/record_manager.js"></script>
    <script src="../../modules/core/foundation/application.js"></script>

    <script src="../../modules/ui/page.js"></script>
    <script src="../../modules/ui/toolbar.js"></script>
    <script src="../../modules/ui/scroll.js"></script>
    <script src="../../modules/ui/label.js"></script>
    <script src="../../modules/ui/button.js"></script>
    <script src="../../modules/ui/list.js"></script>
    <script src="../../modules/ui/list_item.js"></script>
    <script src="../../modules/ui/text_field.js"></script>
    <script src="../../modules/ui/grid.js"></script>
    <script src="../../modules/ui/image.js"></script>
    <script src="../../modules/ui/toggle.js"></script>
    <script src="../../modules/ui/tab_bar.js"></script>
    <script src="../../modules/ui/tab_bar_item.js"></script>
    <script src="../../modules/ui/dialog.js"></script>
    <script src="../../modules/ui/dialogs/alert_dialog.js"></script>
    <script src="../../modules/ui/dialogs/confirm_dialog.js"></script>
    <script src="../../modules/ui/dialogs/action_sheet_dialog.js"></script>
    <script src="../../modules/ui/form.js"></script>

    <script src="contacts.js"></script>

    <link href="../../modules/themes/jquery_mobile/jquery.mobile-1.0a2.min.css" rel="stylesheet" />
    <link href="resources/style.css" rel="stylesheet" />
</head>
<body>
        <script language="JavaScript">
            Contacts.app = M.Application.design({
                page: M.PageView.design({

                    onLoad: {
                        target: Contacts.ContactController,
                        action: 'init'
                    },

                    childViews: 'header content',

                    header: M.ToolbarView.design({
                        childViews: 'centerLabel addButton',

                        centerLabel: M.LabelView.design({
                            value: 'Contacts',
                            anchorLocation: M.CENTER
                        }),

                        addButton: M.ButtonView.design({
                            value: 'new',
                            icon: 'plus',
                            target: Contacts.ContactController,
                            action: 'newContact',
                            anchorLocation: M.RIGHT
                        }),
                        anchorLocation: M.TOP
                    }),

                    content: M.ScrollView.design({

                        childViews: 'contactList',

                        contactList: M.ListView.design({
                            contentBinding: 'Contacts.ContactController.contacts',
                            listItemTemplateView: Contacts.ContactItemView
                        })
                    })
                }),

                page2: M.PageView.design({

                    childViews: 'header content',

                    header: M.ToolbarView.design({
                        childViews: 'centerLabel',

                        centerLabel: M.LabelView.design({
                            value: 'New Contact',
                            anchorLocation: M.CENTER
                        }),

                        showBackButton: YES,

                        anchorLocation: M.TOP
                    }),

                    content: M.ScrollView.design({

                        childViews: 'form addButton',

                        form: M.FormView.design({

                            validator: {
                                title: 'Error in contact form'
                            },

                            childViews: 'firstNameField lastNameField zipField', //companyField streetField zipField cityField mobileField emailField homepageField birthdayField notesField'

                            firstNameField: M.TextFieldView.design({
                                label: 'First Name'
                            }),

                            lastNameField: M.TextFieldView.design({
                                label: 'Last Name'
                            }),

                            companyField: M.TextFieldView.design({
                                label: 'Company'
                            }),

                            streetField: M.TextFieldView.design({
                                label: 'Street'
                            }),

                            zipField: M.TextFieldView.design({
                                label: 'Zip'
                            }),

                            cityField: M.TextFieldView.design({
                                label: 'City'
                            }),

                            mobileField: M.TextFieldView.design({
                                label: 'Mobile'
                            }),

                            emailField: M.TextFieldView.design({
                                label: 'E-Mail'
                            }),

                            homepageField: M.TextFieldView.design({
                                label: 'Homepage'
                            }),

                            birthdayField: M.TextFieldView.design({
                                label: 'Birthday'
                            }),

                            notesField: M.TextFieldView.design({
                                label: 'Notes',
                                hasMultipleLines: YES
                            })
                        }),

                        addButton: M.ButtonView.design({
                            value: 'Add contact',
                            icon: '+',
                            target: Contacts.ContactController,
                            action: 'addContact'
                        })

                    })
                }),

                detailPage: M.PageView.design({
                    childViews: 'header content',

                    header: M.ToolbarView.design({
                        childViews: 'centerLabel',

                        centerLabel: M.LabelView.design({
                            value: 'New Contact',
                            anchorLocation: M.CENTER
                        }),

                        showBackButton: YES,

                        anchorLocation: M.TOP
                    }),

                    content: M.ScrollView.design({

                        childViews: 'firstNameField lastNameField zipField delButton',

                        firstNameField: M.TextFieldView.design({
                            label: 'First Name'
                        }),

                        lastNameField: M.TextFieldView.design({
                            label: 'Last Name'
                        }),

                        zipField: M.TextFieldView.design({
                            label: 'Zip'
                        }),

                        delButton: M.ButtonView.design({
                            value: 'Delete Contact',
                            cssClass: 'b',
                            target: Contacts.ContactController,
                            action: 'deleteContact'
                        })

                    })
                })
            });
        </script>

        <!-- START THE APP BY CALLING THE M.APPLICATION's MAIN-METHOD -->
        <!-- in the future this call will be made automatically -->
        <script language="JavaScript">
            Contacts.app.main();
        </script>

</body>
</html>